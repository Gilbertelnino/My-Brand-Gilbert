{"version":3,"sources":["../../../server/tests/queries/createMessage.spec.js"],"names":["expect","chai","use","chaiHttp","createMessage","Message","deleteMany","server","close","it","done","request","post","send","MessageValues","invalidMessage","end","err","res","to","be","have","status","validMessage","body","property"],"mappings":";;;;;;;AAAA;;AACA;;AAEA;;AACA;;AACA;;AACA;;AACA;;;;;;;;IAEQA,M,GAAWC,gB,CAAXD,M;;AACRC,iBAAKC,GAAL,CAASC,oBAAT;;AAEA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAC1B,8FAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACFC,oBAAQC,UAAR,CAAmB,EAAnB,CADE;;AAAA;AAERC,8BAAOC,KAAP;;AAFQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAV;AAIAC,EAAAA,EAAE,CAAC,mFAAD,EAAsF,UAACC,IAAD,EAAU;AAChGT,qBACGU,OADH,CACWJ,iBADX,EAEGK,IAFH,CAEQ,mBAFR,EAGGC,IAHH,CAGQC,oBAAcC,cAHtB,EAIGC,GAJH,CAIO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjBlB,MAAAA,MAAM,CAACiB,GAAD,CAAN,CAAYE,EAAZ,CAAeC,EAAf;AACApB,MAAAA,MAAM,CAACkB,GAAD,CAAN,CAAYC,EAAZ,CAAeE,IAAf,CAAoBC,MAApB,CAA2B,GAA3B;AACAZ,MAAAA,IAAI;AACL,KARH;AASD,GAVC,CAAF;AAWAD,EAAAA,EAAE,CAAC,uDAAD,EAA0D,UAACC,IAAD,EAAU;AACpET,qBACGU,OADH,CACWJ,iBADX,EAEGK,IAFH,CAEQ,mBAFR,EAGGC,IAHH,CAGQC,oBAAcS,YAHtB,EAIGP,GAJH,CAIO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjBlB,MAAAA,MAAM,CAACiB,GAAD,CAAN,CAAYE,EAAZ,CAAeC,EAAf;AACApB,MAAAA,MAAM,CAACkB,GAAD,CAAN,CAAYC,EAAZ,CAAeE,IAAf,CAAoBC,MAApB,CAA2B,GAA3B;AACAtB,MAAAA,MAAM,CAACkB,GAAG,CAACM,IAAL,CAAN,CAAiBL,EAAjB,CAAoBE,IAApB,CAAyBI,QAAzB,CACE,SADF,EAEE,2BAFF;AAIAf,MAAAA,IAAI;AACL,KAZH;AAaD,GAdC,CAAF;AAeD,CA/BD;;eAiCeN,a","sourcesContent":["import chai from \"chai\";\r\nimport { afterEach } from \"mocha\";\r\n\r\nimport chaiHttp from \"chai-http\";\r\nimport server from \"../../index\";\r\nimport MessageValues from \"../asset/queries\";\r\nimport Message from \"../../models/Message\";\r\nimport VerifiedToken from \"../asset/article\";\r\n\r\nconst { expect } = chai;\r\nchai.use(chaiHttp);\r\n\r\nconst createMessage = () => {\r\n  afterEach(async () => {\r\n    await Message.deleteMany({});\r\n    server.close();\r\n  });\r\n  it(\"should return 400 status if contact form required field is not provided correctly\", (done) => {\r\n    chai\r\n      .request(server)\r\n      .post(\"/api/query/create\")\r\n      .send(MessageValues.invalidMessage)\r\n      .end((err, res) => {\r\n        expect(err).to.be.null;\r\n        expect(res).to.have.status(400);\r\n        done();\r\n      });\r\n  });\r\n  it(\"should return 201 status if message sent successfully\", (done) => {\r\n    chai\r\n      .request(server)\r\n      .post(\"/api/query/create\")\r\n      .send(MessageValues.validMessage)\r\n      .end((err, res) => {\r\n        expect(err).to.be.null;\r\n        expect(res).to.have.status(201);\r\n        expect(res.body).to.have.property(\r\n          \"message\",\r\n          \"Message sent successfully\"\r\n        );\r\n        done();\r\n      });\r\n  });\r\n};\r\n\r\nexport default createMessage;\r\n"],"file":"createMessage.spec.js"}