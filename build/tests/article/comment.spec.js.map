{"version":3,"sources":["../../../server/tests/article/comment.spec.js"],"names":["expect","chai","use","chaiHttp","addComment","Article","deleteMany","it","done","article","ArticleValues","validArticle","save","request","server","post","_id","send","invalidComment","end","err","res","to","be","have","status","body","property","validComment"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;IAEQA,M,GAAWC,gB,CAAXD,M;;AACRC,iBAAKC,GAAL,CAASC,oBAAT;;AAEA,IAAMC,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvB,+FAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACHC,oBAAQC,UAAR,CAAmB,EAAnB,CADG;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAX;AAGA,8FAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACFD,oBAAQC,UAAR,CAAmB,EAAnB,CADE;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAV;AAIAC,EAAAA,EAAE,CAAC,oDAAD,EAAuD,UAACC,IAAD,EAAU;AACjE,QAAMC,OAAO,GAAG,IAAIJ,mBAAJ,CAAYK,oBAAcC,YAA1B,CAAhB;AACAF,IAAAA,OAAO,CAACG,IAAR;;AACAX,qBACGY,OADH,CACWC,iBADX,EAEGC,IAFH,CAEQ,4BAA4BN,OAAO,CAACO,GAF5C,EAGGC,IAHH,CAGQP,oBAAcQ,cAHtB,EAIGC,GAJH,CAIO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjBrB,MAAAA,MAAM,CAACoB,GAAD,CAAN,CAAYE,EAAZ,CAAeC,EAAf;AACAvB,MAAAA,MAAM,CAACqB,GAAD,CAAN,CAAYC,EAAZ,CAAeE,IAAf,CAAoBC,MAApB,CAA2B,GAA3B;AACAjB,MAAAA,IAAI;AACL,KARH;AASD,GAZC,CAAF;AAaAD,EAAAA,EAAE,CAAC,2EAAD,EAA8E,UAACC,IAAD,EAAU;AACxFP,qBACGY,OADH,CACWC,iBADX,EAEGC,IAFH,CAEQ,0BAFR,EAGGI,GAHH,CAGO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjBrB,MAAAA,MAAM,CAACoB,GAAD,CAAN,CAAYE,EAAZ,CAAeC,EAAf;AACAvB,MAAAA,MAAM,CAACqB,GAAD,CAAN,CAAYC,EAAZ,CAAeE,IAAf,CAAoBC,MAApB,CAA2B,GAA3B;AACAzB,MAAAA,MAAM,CAACqB,GAAG,CAACK,IAAL,CAAN,CAAiBJ,EAAjB,CAAoBE,IAApB,CAAyBG,QAAzB,CAAkC,OAAlC,EAA2C,WAA3C;AACAnB,MAAAA,IAAI;AACL,KARH;AASD,GAVC,CAAF;AAWAD,EAAAA,EAAE,CAAC,8CAAD,EAAiD,UAACC,IAAD,EAAU;AAC3D,QAAMC,OAAO,GAAG,IAAIJ,mBAAJ,CAAYK,oBAAcC,YAA1B,CAAhB;AACAF,IAAAA,OAAO,CAACG,IAAR;;AACAX,qBACGY,OADH,CACWC,iBADX,EAEGC,IAFH,kCAEkCN,OAAO,CAACO,GAF1C,QAGGC,IAHH,CAGQP,oBAAckB,YAHtB,EAIGT,GAJH,CAIO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjBrB,MAAAA,MAAM,CAACoB,GAAD,CAAN,CAAYE,EAAZ,CAAeC,EAAf;AACAvB,MAAAA,MAAM,CAACqB,GAAD,CAAN,CAAYC,EAAZ,CAAeE,IAAf,CAAoBC,MAApB,CAA2B,GAA3B;AACAzB,MAAAA,MAAM,CAACqB,GAAG,CAACK,IAAL,CAAN,CAAiBJ,EAAjB,CAAoBE,IAApB,CAAyBG,QAAzB,CACE,SADF,EAEE,8BAFF;AAIAnB,MAAAA,IAAI;AACL,KAZH;AAaD,GAhBC,CAAF;AAiBD,CAjDD;;eAmDeJ,U","sourcesContent":["import chai from \"chai\";\r\nimport { beforeEach, afterEach } from \"mocha\";\r\nimport chaiHttp from \"chai-http\";\r\nimport server from \"../../index\";\r\nimport Article from \"../../models/Article\";\r\nimport ArticleValues from \"../asset/article\";\r\n\r\nconst { expect } = chai;\r\nchai.use(chaiHttp);\r\n\r\nconst addComment = () => {\r\n  beforeEach(async () => {\r\n    await Article.deleteMany({});\r\n  });\r\n  afterEach(async () => {\r\n    await Article.deleteMany({});\r\n  });\r\n\r\n  it(\"should return 400 if comment form input is invalid\", (done) => {\r\n    const article = new Article(ArticleValues.validArticle);\r\n    article.save();\r\n    chai\r\n      .request(server)\r\n      .post(\"/api/articles/comments/\" + article._id)\r\n      .send(ArticleValues.invalidComment)\r\n      .end((err, res) => {\r\n        expect(err).to.be.null;\r\n        expect(res).to.have.status(400);\r\n        done();\r\n      });\r\n  });\r\n  it(\"should not be able to add comment to the article if article id is invalid\", (done) => {\r\n    chai\r\n      .request(server)\r\n      .post(\"/api/articles/comments/1\")\r\n      .end((err, res) => {\r\n        expect(err).to.be.null;\r\n        expect(res).to.have.status(404);\r\n        expect(res.body).to.have.property(\"error\", \"Not Found\");\r\n        done();\r\n      });\r\n  });\r\n  it(\"should be able to add comment if it is valid\", (done) => {\r\n    const article = new Article(ArticleValues.validArticle);\r\n    article.save();\r\n    chai\r\n      .request(server)\r\n      .post(`/api/articles/comments/${article._id} `)\r\n      .send(ArticleValues.validComment)\r\n      .end((err, res) => {\r\n        expect(err).to.be.null;\r\n        expect(res).to.have.status(201);\r\n        expect(res.body).to.have.property(\r\n          \"message\",\r\n          \"comment created successfully\"\r\n        );\r\n        done();\r\n      });\r\n  });\r\n};\r\n\r\nexport default addComment;\r\n"],"file":"comment.spec.js"}