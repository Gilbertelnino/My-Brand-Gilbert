{"version":3,"sources":["../../../server/tests/article/updateArticle.spec.js"],"names":["expect","chai","use","chaiHttp","updateArticle","Article","deleteMany","server","close","it","done","article","ArticleValues","validArticle","save","request","patch","_id","set","noTokenProvided","end","err","res","to","be","have","status","body","property","validToken"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;IAEQA,M,GAAWC,gB,CAAXD,M;;AACRC,iBAAKC,GAAL,CAASC,oBAAT;;AAEA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAC1B,0FAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACEC,oBAAQC,UAAR,CAAmB,EAAnB,CADF;;AAAA;AAEJC,8BAAOC,KAAP;;AAFI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAN;AAIAC,EAAAA,EAAE,CAAC,iEAAD,EAAoE,UAACC,IAAD,EAAU;AAC9E,QAAMC,OAAO,GAAG,IAAIN,mBAAJ,CAAYO,oBAAcC,YAA1B,CAAhB;AACAF,IAAAA,OAAO,CAACG,IAAR;;AACAb,qBACGc,OADH,CACWR,iBADX,EAEGS,KAFH,CAES,mBAAmBL,OAAO,CAACM,GAFpC,EAGGC,GAHH,CAGON,oBAAcO,eAHrB,EAIGC,GAJH,CAIO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjBtB,MAAAA,MAAM,CAACqB,GAAD,CAAN,CAAYE,EAAZ,CAAeC,EAAf;AACAxB,MAAAA,MAAM,CAACsB,GAAD,CAAN,CAAYC,EAAZ,CAAeE,IAAf,CAAoBC,MAApB,CAA2B,GAA3B;AACA1B,MAAAA,MAAM,CAACsB,GAAG,CAACK,IAAL,CAAN,CAAiBJ,EAAjB,CAAoBE,IAApB,CAAyBG,QAAzB,CAAkC,SAAlC,EAA6C,eAA7C;AACAlB,MAAAA,IAAI;AACL,KATH;AAUD,GAbC,CAAF;AAcAD,EAAAA,EAAE,CAAC,uEAAD,EAA0E,UAACC,IAAD,EAAU;AACpFT,qBACGc,OADH,CACWR,iBADX,EAEGS,KAFH,CAES,iBAFT,EAGGE,GAHH,CAGON,oBAAciB,UAHrB,EAIGT,GAJH,CAIO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjBtB,MAAAA,MAAM,CAACqB,GAAD,CAAN,CAAYE,EAAZ,CAAeC,EAAf;AACAxB,MAAAA,MAAM,CAACsB,GAAD,CAAN,CAAYC,EAAZ,CAAeE,IAAf,CAAoBC,MAApB,CAA2B,GAA3B;AACA1B,MAAAA,MAAM,CAACsB,GAAG,CAACK,IAAL,CAAN,CAAiBJ,EAAjB,CAAoBE,IAApB,CAAyBG,QAAzB,CAAkC,OAAlC,EAA2C,WAA3C;AACAlB,MAAAA,IAAI;AACL,KATH;AAUD,GAXC,CAAF,CAnB0B,CA+B1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,CAjDD;;eAmDeN,a","sourcesContent":["import chai from \"chai\";\r\nimport { after } from \"mocha\";\r\nimport chaiHttp from \"chai-http\";\r\nimport server from \"../../index\";\r\nimport Article from \"../../models/Article\";\r\nimport ArticleValues from \"../asset/article\";\r\n\r\nconst { expect } = chai;\r\nchai.use(chaiHttp);\r\n\r\nconst updateArticle = () => {\r\n  after(async () => {\r\n    await Article.deleteMany({});\r\n    server.close();\r\n  });\r\n  it(\"should not able to update article if there is no token provided\", (done) => {\r\n    const article = new Article(ArticleValues.validArticle);\r\n    article.save();\r\n    chai\r\n      .request(server)\r\n      .patch(\"/api/articles/\" + article._id)\r\n      .set(ArticleValues.noTokenProvided)\r\n      .end((err, res) => {\r\n        expect(err).to.be.null;\r\n        expect(res).to.have.status(401);\r\n        expect(res.body).to.have.property(\"message\", \"access denied\");\r\n        done();\r\n      });\r\n  });\r\n  it(\"should not be able to update article if id is invalid or id not found\", (done) => {\r\n    chai\r\n      .request(server)\r\n      .patch(\"/api/articles/1\")\r\n      .set(ArticleValues.validToken)\r\n      .end((err, res) => {\r\n        expect(err).to.be.null;\r\n        expect(res).to.have.status(404);\r\n        expect(res.body).to.have.property(\"error\", \"Not Found\");\r\n        done();\r\n      });\r\n  });\r\n  //   it(\"should be able to update article if it is found\", (done) => {\r\n  //     const article = new Article(ArticleValues.validArticle);\r\n  //     article.save();\r\n  //     chai\r\n  //       .request(server)\r\n  //       .patch(`/api/articles/${article._id} `)\r\n  //       .set(ArticleValues.validToken)\r\n  //       .send(ArticleValues.updatedArticle)\r\n  //       .end((err, res) => {\r\n  //         expect(err).to.be.null;\r\n  //         expect(res).to.have.status(200);\r\n  //         expect(res.body).to.have.property(\r\n  //           \"message\",\r\n  //           \"post updated successfully\"\r\n  //         );\r\n  //         done();\r\n  //       });\r\n  //   });\r\n};\r\n\r\nexport default updateArticle;\r\n"],"file":"updateArticle.spec.js"}